# secondKill
一个基于SSM的秒杀服务的实现
## 环境
Maven+IDEA+SSM
## 项目概述
模仿秒杀活动。
首先展示一个秒杀活动商品列表，包括商品和秒杀倒计时。用户可点击单个商品进入秒杀详情页。
当秒杀详情页的倒计时结束时，用户可点击按钮进行秒杀。然后返回秒杀成功与否。
未登录点击进入详情页时，会先要求登录。
## 并发优化分析
### 1.详情页
用户在倒计时时，可能频繁刷新商品详情页。
详情页优化动静资源分离，静态资源使用Bootstrap的CDN，动态资源（秒杀商品的信息）放入Redis。
使用protoStuff进行序列化，将对象转化为字符数组，再放入Redis。
因为商品详情是很少变化的信息，所以可以进行后端缓存。
### 2.秒杀过程
到达秒杀时间时，点击秒杀按钮，秒杀接口暴露。接着主要进行两个操作，一是减库存，二是插入秒杀记录信息。
我们使用一个存储过程。该过程包括减库存和插入记录信息，当都成功时，事务结束，否则rollback。
存储过程定义不同的返回值代表不同的结果。在xml文件中写出SQL语句，再在mapper文件和service中定义接口方法。

在客户端逻辑中看到不同的结果后，就可得知是成功还是未成功。
我们在以往的开发中，往往在客户端逻辑中进行事务控制，这样与数据库结果的网络交互开销将会很大。
将事务控制写成存储过程交给MySQL去做，将会大大节省时间。而MySQL本身处理这些过程是非常快的。
